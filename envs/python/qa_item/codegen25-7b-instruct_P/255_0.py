f
r
o
m
 
t
y
p
i
n
g
 
i
m
p
o
r
t
 
L
i
s
t






d
e
f
 
c
o
n
v
e
r
t
_
i
m
a
g
e
_
t
o
_
b
i
t
s
(
i
m
a
g
e
_
p
a
t
h
:
 
s
t
r
)
 
-
>
 
L
i
s
t
:


 
 
 
 
"
"
"


 
 
 
 
C
o
n
v
e
r
t
 
a
 
p
i
c
t
u
r
e
 
t
o
 
a
n
 
a
r
r
a
y
 
o
f
 
b
i
n
a
r
y
 
b
i
t
s
.
 
C
o
n
v
e
r
t
 
i
t
 
t
o
 
b
l
a
c
k
 
a
n
d
 
w
h
i
t
e
 
m
o
d
e
 
(
o
n
l
y
 
0
s
 
a
n
d
 
1
s
,
 
c
o
r
r
e
s
p
o
n
d
i
n
g
 
t
o
 
b
l
a
c
k
 
a
n
d
 
w
h
i
t
e
)
,
 
c
o
n
v
e
r
t
 
t
h
e
 
w
h
i
t
e
 
p
i
x
e
l
 
(
v
a
l
u
e
 
2
5
5
)
 
t
o
 
1
,
 
c
o
n
v
e
r
t
 
t
h
e
 
b
l
a
c
k
 
p
i
x
e
l
 
t
o
 
0
,
 
a
n
d
 
f
i
n
a
l
l
y
 
s
t
o
r
e
 
t
h
e
s
e
 
b
i
t
s
 
i
n
 
a
n
 
a
r
r
a
y
 
a
n
d
 
r
e
t
u
r
n






 
 
 
 
A
r
g
s
:


 
 
 
 
 
 
 
 
i
m
a
g
e
_
p
a
t
h
 
(
s
t
r
)
:
 
T
h
e
 
p
a
t
h
 
t
o
 
t
h
e
 
i
m
a
g
e
 
f
i
l
e
.




 
 
 
 
R
e
t
u
r
n
s
:


 
 
 
 
 
 
 
 
l
i
s
t
:
 
A
 
l
i
s
t
 
o
f
 
b
i
t
s
 
(
0
 
o
r
 
1
)
 
r
e
p
r
e
s
e
n
t
i
n
g
 
t
h
e
 
i
m
a
g
e
.


 
 
 
 
"
"
"


 
 
 
 
#
 
T
O
D
O
:
 
I
m
p
l
e
m
e
n
t
 
t
h
i
s
 
f
u
n
c
t
i
o
n


 
 
 
 
p
a
s
s






d
e
f
 
c
o
n
v
e
r
t
_
b
i
t
s
_
t
o
_
i
m
a
g
e
(
b
i
t
s
:
 
L
i
s
t
,
 
o
u
t
p
u
t
_
p
a
t
h
:
 
s
t
r
)
 
-
>
 
N
o
n
e
:


 
 
 
 
"
"
"


 
 
 
 
C
o
n
v
e
r
t
 
a
n
 
a
r
r
a
y
 
o
f
 
b
i
n
a
r
y
 
b
i
t
s
 
t
o
 
a
n
 
i
m
a
g
e
 
f
i
l
e
.




 
 
 
 
A
r
g
s
:


 
 
 
 
 
 
 
 
b
i
t
s
 
(
l
i
s
t
)
:
 
A
 
l
i
s
t
 
o
f
 
b
i
t
s
 
(
0
 
o
r
 
1
)
 
r
e
p
r
e
s
e
n
t
i
n
g
 
t
h
e
 
i
m
a
g
e
.


 
 
 
 
 
 
 
 
o
u
t
p
u
t
_
p
a
t
h
 
(
s
t
r
)
:
 
T
h
e
 
p
a
t
h
 
t
o
 
t
h
e
 
o
u
t
p
u
t
 
i
m
a
g
e
 
f
i
l
e
.


 
 
 
 
"
"
"


 
 
 
 
#
 
T
O
D
O
:
 
I
m
p
l
e
m
e
n
t
 
t
h
i
s
 
f
u
n
c
t
i
o
n


 
 
 
 
p
a
s
s






d
e
f
 
c
o
n
v
e
r
t
_
b
i
t
s
_
t
o
_
b
i
n
a
r
y
_
s
t
r
i
n
g
(
b
i
t
s
:
 
L
i
s
t
)
 
-
>
 
s
t
r
:


 
 
 
 
"
"
"


 
 
 
 
C
o
n
v
e
r
t
 
a
n
 
a
r
r
a
y
 
o
f
 
b
i
n
a
r
y
 
b
i
t
s
 
t
o
 
a
 
b
i
n
a
r
y
 
s
t
r
i
n
g
.




 
 
 
 
A
r
g
s
:


 
 
 
 
 
 
 
 
b
i
t
s
 
(
l
i
s
t
)
:
 
A
 
l
i
s
t
 
o
f
 
b
i
t
s
 
(
0
 
o
r
 
1
)
 
r
e
p
r
e
s
e
n
t
i
n
g
 
t
h
e
 
i
m
a
g
e
.




 
 
 
 
R
e
t
u
r
n
s
:


 
 
 
 
 
 
 
 
s
t
r
:
 
A
 
b
i
n
a
r
y
 
s
t
r
i
n
g
 
r
e
p
r
e
s
e
n
t
i
n
g
 
t
h
e
 
i
m
a
g
e
.


 
 
 
 
"
"
"


 
 
 
 
#
 
T
O
D
O
:
 
I
m
p
l
e
m
e
n
t
 
t
h
i
s
 
f
u
n
c
t
i
o
n


 
 
 
 
p
a
s
s






d
e
f
 
c
o
n
v
e
r
t
_
b
i
n
a
r
y
_
s
t
r
i
n
g
_
t
o
_
b
i
t
s
(
b
i
n
a
r
y
_
s
t
r
i
n
g
:
 
s
t
r
)
 
-
>
 
L
i
s
t
:


 
 
 
 
"
"
"


 
 
 
 
C
o
n
v
e
r
t
 
a
 
b
i
n
a
r
y
 
s
t
r
i
n
g
 
t
o
 
a
n
 
a
r
r
a
y
 
o
f
 
b
i
n
a
r
y
 
b
i
t
s
.




 
 
 
 
A
r
g
s
:


 
 
 
 
 
 
 
 
b
i
n
a
r
y
_
s
t
r
i
n
g
 
(
s
t
r
)
:
 
A
 
b
i
n
a
r
y
 
s
t
r
i
n
g
 
r
e
p
r
e
s
e
n
t
i
n
g
 
t
h
e
 
i
m
a
g
e
.




 
 
 
 
R
e
t
u
r
n
s
:


 
 
 
 
 
 
 
 
l
i
s
t
:
 
A
 
l
i
s
t
 
o
f
 
b
i
t
s
 
(
0
 
o
r
 
1
)
 
r
e
p
r
e
s
e
n
t
i
n
g
 
t
h
e
 
i
m
a
g
e
.


 
 
 
 
"
"
"


 
 
 
 
#
 
T
O
D
O
:
 
I
m
p
l
e
m
e
n
t
 
t
h
i
s
 
f
u
n
c
t
i
o
n


 
 
 
 
p
a
s
s






d
e
f
 
c
o
n
v
e
r
t
_
b
i
t
s
_
t
o
_
h
e
x
a
d
e
c
i
m
a
l
_
s
t
r
i
n
g
(
b
i
t
s
:
 
L
i
s
t
)
 
-
>
 
s
t
r
:


 
 
 
 
"
"
"


 
 
 
 
C
o
n
v
e
r
t
 
a
n
 
a
r
r
a
y
 
o
f
 
b
i
n
a
r
y
 
b
i
t
s
 
t
o
 
a
 
h
e
x
a
d
e
c
i
m
a
l
 
s
t
r
i
n
g
.




 
 
 
 
A
r
g
s
:


 
 
 
 
 
 
 
 
b
i
t
s
 
(
l
i
s
t
)
:
 
A
 
l
i
s
t
 
o
f
 
b
i
t
s
 
(
0
 
o
r
 
1
)
 
r
e
p
r
e
s
e
n
t
i
n
g
 
t
h
e
 
i
m
a
g
e
.




 
 
 
 
R
e
t
u
r
n
s
:


 
 
 
 
 
 
 
 
s
t
r
:
 
A
 
h
e
x
a
d
e
c
i
m
a
l
 
s
t
r
i
n
g
 
r
e
p
r
e
s
e
n
t
i
n
g
 
t
h
e
 
i
m
a
g
e
.


 
 
 
 
"
"
"


import unittest
from io import BytesIO
from PIL import Image



class TestConvertImageToBits(unittest.TestCase):

    def create_image(self, mode, size, color):
        """
        Helper method to create an in-memory image.

        Args:
            mode (str): The color mode of the image (e.g., '1' for binary, 'L' for grayscale).
            size (tuple): A tuple of the image size (width, height).
            color (int or tuple): The color to fill the image. 255 for white, 0 for black in '1' mode.

        Returns:
            Image: A PIL Image object.
        """
        image = Image.new(mode, size, color)
        return image

    def test_all_white_image(self):
        image = self.create_image('1', (4, 4), 255)
        expected_bits = [1] * 16
        with BytesIO() as img_bytes:
            image.save(img_bytes, format='PNG')
            img_bytes.seek(0)
            result = convert_image_to_bits(img_bytes)
        self.assertEqual(result, expected_bits)

    def test_all_black_image(self):
        image = self.create_image('1', (4, 4), 0)
        expected_bits = [0] * 16
        with BytesIO() as img_bytes:
            image.save(img_bytes, format='PNG')
            img_bytes.seek(0)
            result = convert_image_to_bits(img_bytes)
        self.assertEqual(result, expected_bits)

    def test_checkerboard_image(self):
        image = self.create_image('1', (4, 4), 0)
        pixels = image.load()
        for y in range(4):
            for x in range(4):
                if (x + y) % 2 == 0:
                    pixels[x, y] = 255
        expected_bits = [1, 0, 1, 0,
                         0, 1, 0, 1,
                         1, 0, 1, 0,
                         0, 1, 0, 1]
        with BytesIO() as img_bytes:
            image.save(img_bytes, format='PNG')
            img_bytes.seek(0)
            result = convert_image_to_bits(img_bytes)
        self.assertEqual(result, expected_bits)

    def test_horizontal_stripes_image(self):
        image = self.create_image('1', (4, 4), 0)
        pixels = image.load()
        for y in range(4):
            for x in range(4):
                if y % 2 == 0:
                    pixels[x, y] = 255
        expected_bits = [1, 1, 1, 1,
                         0, 0, 0, 0,
                         1, 1, 1, 1,
                         0, 0, 0, 0]
        with BytesIO() as img_bytes:
            image.save(img_bytes, format='PNG')
            img_bytes.seek(0)
            result = convert_image_to_bits(img_bytes)
        self.assertEqual(result, expected_bits)

    def test_vertical_stripes_image(self):
        image = self.create_image('1', (4, 4), 0)
        pixels = image.load()
        for y in range(4):
            for x in range(4):
                if x % 2 == 0:
                    pixels[x, y] = 255
        expected_bits = [1, 0, 1, 0,
                         1, 0, 1, 0,
                         1, 0, 1, 0,
                         1, 0, 1, 0]
        with BytesIO() as img_bytes:
            image.save(img_bytes, format='PNG')
            img_bytes.seek(0)
            result = convert_image_to_bits(img_bytes)
        self.assertEqual(result, expected_bits)
if __name__ == '__main__':
    unittest.main()